# call a int function, with parameters and return value
# dif(a,b,c,d)=(a+b)-(c+d)
# in this function: dif(4,5,6,7)=(4+5)-(6+7)=-4=0xfffffffc, and in the end $t0 = $v0 = -4

#		Assembly			Description				Address		Machine		Binary

# main
main:	addi $29, $0, 127	# $sp = 508(4*127)		0			201d01fc	001000 00000 11101 0000 0001 1111 1100

		addi $16, $0, 16	# $s0 = 16				4			20100010	001000 00000 10000 0000 0000 0001 0000
		addi $31, $0, 31	# $ra = 31				8			201f001f	001000 00000 11111 0000 0000 0001 1111
		
		addi $4, $0, 4		# $a0 = 4				14			20040004	001000 00000 00100 0000 0000 0000 0100
		addi $5, $0, 5		# $a1 = 5				18			20050005	001000 00000 00101 0000 0000 0000 0101
		addi $6, $0, 6		# $a2 = 6				c			20060006	001000 00000 00110 0000 0000 0000 0110
		addi $7, $0, 7		# $a3 = 7				10			20070007	001000 00000 00111 0000 0000 0000 0111

		jal  dif			# call dif				1c			0c00000a	000011 000000 0000 0000 0000 0000 1010
		nop					# no operation			20			00000000
		
		j	 end			# jump end				24			08000015	000010 000000 0000 0000 0000 0001 0101
		

dif:	addi $29, $29, -8	# $sp = $sp - 8			28			23bdfff8	001000 11101 11101 1111 1111 1111 1000
		sw	 $31, 0($29)	# [$sp] = $ra			2c			afbf0000	101011 11101 11111 0000 0000 0000 0000
		sw	 $16, 4($29)	# [$sp + 4] = $s0		30			afb00004	101011 11101 10000 0000 0000 0000 0100
		
		add  $8, $4, $5		# $t0 = $a0 + $a1		34			00854020	000000 00100 00101 01000 00000 100000
		add  $9, $6, $7		# $t1 = $a2 + $a3		38			00c74820	000000 00110 00111 01001 00000 100000
		sub  $16, $8, $9	# $s0 = $t0 - $t1		3c			01098022	000000 01000 01001 10000 00000 100010
		add  $2, $16, $0	# $v0 = $s0 + $0		40			02001020	000000 10000 00000 00010 00000 100000
		
		lw	 $31, 0($29)	# $ra = [$sp]	 		44			8fbf0000	100011 11101 11111 0000 0000 0000 0000
		lw	 $16, 4($29)	# $s0 = [$sp + 4] 		48			8fb00004	100011 11101 10000 0000 0000 0000 0100
		
		addi $29, $29, 8	# $sp = $sp + 8			4c			23bd0008	001000 11101 11101 0000 0000 0000 1000
		jr	 $31			# return				50			03e00008	000000 11111 0000000000 00000 001000

end:	addi $8, $2, 0		# $t0 = $v0	+ $0		54			20480000	001000 00010 01000 0000 0000 0000 0000


